
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://tsiendragon.github.io/learning/book/phase1/linux_basics/06_git_version_control.html">
      
      
        <link rel="prev" href="05_shell_scripting.html">
      
      
        <link rel="next" href="07_development_tools.html">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Git Version Control - Learning Path: Linux and Python</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#git-version-control-system" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../index.html" title="Learning Path: Linux and Python" class="md-header__button md-logo" aria-label="Learning Path: Linux and Python" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Learning Path: Linux and Python
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Git Version Control
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/tsiendragon/learning" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../index.html" class="md-tabs__link">
        
  
    
  
  HOMEPAGE

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="01_linux_file_system.html" class="md-tabs__link">
          
  
  Phase 1 - Linux Basics

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../phase2/python_basics/01_basic_syntax.html" class="md-tabs__link">
          
  
  Phase 2 - Python Basics

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../phase2/leetcode/16_3sum_closest.html" class="md-tabs__link">
          
  
  Phase 2 - Leetcode

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../mkdocs_deployment_guide.html" class="md-tabs__link">
        
  
    
  
  Deployment Guide

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../index.html" title="Learning Path: Linux and Python" class="md-nav__button md-logo" aria-label="Learning Path: Linux and Python" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg>

    </a>
    Learning Path: Linux and Python
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tsiendragon/learning" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HOMEPAGE
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Phase 1 - Linux Basics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Phase 1 - Linux Basics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="01_linux_file_system.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File System
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="02_permission_management.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Permission Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="03_network_basics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="04_text_editors.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Text Editors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="05_shell_scripting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shell Scripting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Git Version Control
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="06_git_version_control.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Git Version Control
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#concept-explanation" class="md-nav__link">
    <span class="md-ellipsis">
      Concept Explanation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameter-explanation" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter Explanation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practical-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Practical Examples
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Test Questions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#git" class="md-nav__link">
    <span class="md-ellipsis">
      Git 版本控制系统
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Git 版本控制系统">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      概念的解释
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      参数的解释
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#git-untracked-committed" class="md-nav__link">
    <span class="md-ellipsis">
      Git 文件状态详解：从 Untracked 到 Committed
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#git-flow-best-practice" class="md-nav__link">
    <span class="md-ellipsis">
      Git flow best practice
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      实践的例子
    </span>
  </a>
  
    <nav class="md-nav" aria-label="实践的例子">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-workflow-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      1. workflow simulation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2use-git-stash-to-work-cross-branches" class="md-nav__link">
    <span class="md-ellipsis">
      2.use git stash to work cross branches
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-merge" class="md-nav__link">
    <span class="md-ellipsis">
      3. merge 工作流程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-git-cherry-pick" class="md-nav__link">
    <span class="md-ellipsis">
      4. git cherry-pick
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-git-rebase" class="md-nav__link">
    <span class="md-ellipsis">
      5. git rebase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-git-reset" class="md-nav__link">
    <span class="md-ellipsis">
      6. git reset
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. git reset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-git-reset-soft" class="md-nav__link">
    <span class="md-ellipsis">
      1. 使用 git reset --soft：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-reset-mixed" class="md-nav__link">
    <span class="md-ellipsis">
      使用 git reset --mixed（默认模式）：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-reset-hard" class="md-nav__link">
    <span class="md-ellipsis">
      使用 git reset --hard
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="07_development_tools.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="08_networking_remote_operations.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Networking & Remote Operations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="09_programming_environment.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Programming Environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="10_performance_tuning.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance Tuning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="11_containers_virtualization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Containers & Virtualization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="12_file_data_processing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File & Data Processing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Phase 2 - Python Basics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Phase 2 - Python Basics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../phase2/python_basics/01_basic_syntax.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Syntax
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../phase2/python_basics/02_functions_modules.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functions & Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../phase2/python_basics/03_classes_objects.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Classes & Objects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../phase2/python_basics/04_common_libraries.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Common Libraries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../phase2/python_basics/05_best_practices.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../phase2/python_basics/06_algorithms_techniques.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Algorithms & Techniques
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Phase 2 - Leetcode
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Phase 2 - Leetcode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../phase2/leetcode/16_3sum_closest.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    16 three sum closest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../phase2/leetcode/18_4sum.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    18 four sum
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs_deployment_guide.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment Guide
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="git-version-control-system">Git Version Control System</h1>
<p>This section will introduce Git, a distributed version control system, and cover basic commands for managing repositories.</p>
<h2 id="concept-explanation">Concept Explanation</h2>
<p>Git is a distributed version control system used to track changes in files and collaborate on development.</p>
<h2 id="parameter-explanation">Parameter Explanation</h2>
<ul>
<li>🏗️ <strong><code>git init</code></strong>: Initializes a new Git repository.</li>
<li>📥 <strong><code>git clone</code></strong>: Clones a remote repository.</li>
<li>➕ <strong><code>git add</code></strong>: Adds files to the staging area.</li>
<li>💾 <strong><code>git commit</code></strong>: Commits changes.</li>
<li>📝 <code>-m</code>: Adds a commit message.</li>
<li>🚀 <strong><code>git push</code></strong>: Pushes local commits to a remote repository.</li>
</ul>
<h2 id="practical-examples">Practical Examples</h2>
<ol>
<li>🎯 Use <code>git init</code> to initialize a new repository.</li>
<li>📦 Use <code>git clone &lt;repo&gt;</code> to clone a remote repository.</li>
<li>✨ Use <code>git add .</code> to add all changes to the staging area.</li>
<li>💫 Use <code>git commit -m "Initial commit"</code> to commit changes.</li>
<li>🔼 Use <code>git push origin main</code> to push to a remote repository.</li>
<li>Delete Branches
   🚀 <strong>Recommended Practices</strong>
   1️⃣ <strong>To delete only the remote branch</strong>: <code>git push origin --delete branch-name</code>
   2️⃣ <strong>To update local remote branch list</strong>: <code>git fetch --prune</code>
   3️⃣ <strong>To delete a GitHub remote branch</strong>: Delete directly from GitHub's "Branches" page
   4️⃣ <strong>If deleting <code>main</code></strong>: Ensure a new <code>main</code> is created before executing the deletion</li>
</ol>
<h2 id="test-questions">Test Questions</h2>
<ol>
<li>How do you initialize a new Git repository?</li>
<li>Which command is used to clone a remote repository?</li>
<li>How do you commit changes and add a commit message?</li>
</ol>
<h2 id="git">Git 版本控制系统</h2>
<h3 id="_1">概念的解释</h3>
<p>Git 是一个分布式版本控制系统，用于跟踪文件的更改和协作开发。</p>
<h3 id="_2">参数的解释</h3>
<ul>
<li>🏗️ <strong><code>git init</code></strong>：初始化一个新的 Git 仓库。</li>
<li>📥 <strong><code>git clone</code></strong>：克隆远程仓库。</li>
<li>➕ <strong><code>git add</code></strong>：添加文件到暂存区。</li>
<li>💾 <strong><code>git commit</code></strong>：提交更改。</li>
<li>📝 <code>-m</code>：添加提交信息。</li>
<li>🚀 <strong><code>git push</code></strong>：推送本地提交到远程仓库。</li>
<li><strong><code>git merge --squash</code></strong>：将指定分支的更改合并到当前分支，但不自动创建合并提交。合并的更改会被暂存，用户需要手动创建提交。</li>
<li><strong><code>git cherry-pick</code></strong>：从远程仓库中提取指定的提交并应用到本地。</li>
<li><strong><code>git rebase</code></strong>：<code>git rebase</code> 是一个用于将一个分支的更改应用到另一个分支之上的命令。它常用于线性化提交历史，保持历史的简洁性和可读性。在使用 <code>git rebase</code> 时，Git 会把当前分支从其基础分支“移出”，并将其应用到新的基础之上。需要注意的是，rebase 会改变提交历史，因此在共享分支上使用时要谨慎。</li>
</ul>
<p><img alt="" src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*K4anH9QzRcPqLCv-7HyiCQ.png" /></p>
<h2 id="git-untracked-committed">Git 文件状态详解：从 Untracked 到 Committed</h2>
<p>在使用 Git 进行版本控制时，文件会经历不同的状态。理解这些状态有助于高效管理代码，并避免丢失重要更改。本文将详细介绍 Git 的几种文件状态，并总结如何在命令行和 VSCode 中查看和操作它们。</p>
<hr />
<p><strong>Git 文件的几种状态</strong>
在 Git 中，文件的状态主要有以下几种：
| 文件状态 | 说明 | 终端查看方式 | VSCode 查看方式 |
| --- | --- | --- | --- |
| Untracked（未跟踪） | Git 未跟踪的新文件，未添加到暂存区 | git status | Source Control 面板，标记为 U（Untracked） |
| Modified（已修改） | 已跟踪的文件被修改，但未添加到暂存区 | git status / git diff | Source Control 面板，标记为 M（Modified） |
| Staged（已暂存） | 修改后的文件已添加到暂存区，等待提交 | git status / git diff --cached | Source Control 面板，出现在 Staged Changes 标记为 A (Added) |
| Committed（已提交） | 文件更改已提交到本地 Git 仓库 | git log / git show <commit-id> | Git History 扩展 或 GitLens |
| Deleted（已删除） | 文件被删除但 Git 仍然跟踪它 | git status / git diff --cached | Source Control 面板，标记为 D（Deleted） |
| Renamed（已重命名） | Git 识别到文件被重命名 | git status | Source Control 面板，标记为 R（Renamed） |
| Ignored（已忽略） | .gitignore 中排除的文件，不被 Git 追踪 | git status --ignored / git check-ignore -v <file> | 默认不在 Source Control 中显示 |</p>
<hr />
<p><strong>Untracked vs Modified：两者的区别</strong>
<strong>Untracked（未跟踪）</strong> 和 <strong>Modified（已修改）</strong> 是 Git 初学者经常混淆的两个状态。</p>
<table>
<thead>
<tr>
<th>状态</th>
<th>是否被 Git 追踪？</th>
<th>是否已 git add？</th>
<th>是否已 git commit？</th>
</tr>
</thead>
<tbody>
<tr>
<td>Untracked（未跟踪）</td>
<td>❌ 否</td>
<td>❌ 否</td>
<td>❌ 否</td>
</tr>
<tr>
<td>Modified（已修改）</td>
<td>✅ 是</td>
<td>❌ 否</td>
<td>❌ 否</td>
</tr>
</tbody>
</table>
<hr />
<p><strong>举例说明</strong></p>
<ul>
<li><strong>Untracked 文件示例</strong></li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Hello&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>new_file.txt
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>git<span class="w"> </span>status
</code></pre></div>
<strong>输出</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nf">Untracked files</span><span class="o">:</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="o">(</span>use<span class="w"> </span><span class="s2">&quot;git add &lt;file&gt;...&quot;</span><span class="w"> </span>to<span class="w"> </span>include<span class="w"> </span><span class="k">in</span><span class="w"> </span>what<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>committed<span class="o">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span>new_file.txt
</code></pre></div>
此时 <code>new_file.txt</code> 还没有被 Git 追踪。**</p>
<ul>
<li><strong>Modified 文件示例</strong></li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>git<span class="w"> </span>add<span class="w"> </span>new_file.txt
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add new_file.txt&quot;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;New content&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>new_file.txt
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>git<span class="w"> </span>status
</code></pre></div>
<strong>输出</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">Changes not staged for commit</span><span class="p">:</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="nt">modified</span><span class="p">:</span><span class="w">   </span><span class="l l-Scalar l-Scalar-Plain">new_file.txt</span>
</code></pre></div>
此时 <code>new_file.txt</code> 已被 Git 追踪，但内容被修改了。**</p>
<hr />
<p><strong>如何转换文件状态？</strong></p>
<table>
<thead>
<tr>
<th>目标状态</th>
<th>Git 操作命令</th>
<th>VSCode 操作方式</th>
</tr>
</thead>
<tbody>
<tr>
<td>Untracked → Staged</td>
<td>git add <file></td>
<td>选中文件，点击 +</td>
</tr>
<tr>
<td>Modified → Staged</td>
<td>git add <file></td>
<td>选中文件，点击 +</td>
</tr>
<tr>
<td>Staged → Committed</td>
<td>git commit -m "message"</td>
<td>输入提交信息后点击 ✓</td>
</tr>
<tr>
<td>Modified → Unmodified（撤销修改）</td>
<td>git restore <file></td>
<td>右键文件，选择 Discard Changes</td>
</tr>
<tr>
<td>Staged → Modified（取消暂存）</td>
<td>git reset HEAD <file></td>
<td>右键文件，选择 Unstage</td>
</tr>
<tr>
<td>Deleted → 还原删除</td>
<td>git checkout -- <file> 或 git restore <file></td>
<td>右键文件，选择 Restore</td>
</tr>
<tr>
<td>Ignored → 追踪文件</td>
<td>编辑 .gitignore 文件，删除对应规则</td>
<td>在 .gitignore 中移除对应文件规则</td>
</tr>
</tbody>
</table>
<hr />
<p><strong>VSCode 中如何查看 Git 文件状态？</strong></p>
<ol>
<li><strong>打开 Source Control（源代码管理）面板</strong></li>
<li>
<p>快捷键 <code>Ctrl+Shift+G</code>（Windows / Linux）或 <code>Cmd+Shift+G</code>（Mac）。</p>
</li>
<li>
<p>未跟踪、已修改、已暂存的文件会在面板中显示。</p>
</li>
<li>
<p><strong>查看文件状态</strong></p>
</li>
<li>
<p><strong>U（Untracked）</strong> ：新文件，未添加到 Git。</p>
</li>
<li>
<p><strong>M（Modified）</strong> ：已修改但未暂存。</p>
</li>
<li>
<p><strong>A（Added）</strong> ：已添加到暂存区。</p>
</li>
<li>
<p><strong>D（Deleted）</strong> ：文件被删除。</p>
</li>
<li>
<p><strong>R（Renamed）</strong> ：文件被重命名。</p>
</li>
<li>
<p><strong>点击文件查看更改</strong></p>
</li>
<li>
<p>直接点击文件可以看到 <strong>修改前后对比（diff）</strong> 。</p>
</li>
<li>
<p><strong>提交更改</strong></p>
</li>
<li>
<p>选中已暂存的文件，输入提交信息后点击 <strong>✓（提交）</strong> 。</p>
</li>
<li>
<p><strong>查看 Git 历史</strong></p>
</li>
<li>使用 <strong>GitLens</strong> 或 <strong>Git Graph</strong> 扩展插件，方便可视化历史提交和变更。</li>
</ol>
<hr />
<p><strong>总结</strong>
- <strong>Untracked 文件是新的，Git 不跟踪，必须 <code>git add</code> 后才能管理。</strong></p>
<ul>
<li>
<p><strong>Modified 文件是已经被 Git 跟踪的，但有新的修改未 <code>git add</code>。</strong></p>
</li>
<li>
<p><strong>Staged 文件已经 <code>git add</code>，等待 <code>git commit</code>。</strong></p>
</li>
<li>
<p><strong>Committed 文件已经提交到本地仓库，可以用 <code>git log</code> 查看历史。</strong></p>
</li>
<li>
<p><strong>在 VSCode 的 Source Control 面板中，可以直观地查看和管理 Git 文件状态。</strong></p>
</li>
</ul>
<h2 id="git-flow-best-practice">Git flow best practice</h2>
<p><img alt="git flow best practice" src="https://media.geeksforgeeks.org/wp-content/uploads/20240223193253/gitflow_diagram_gfg-660.png" /></p>
<p>Git Flow 是一个基于分支的软件开发工作流程，它定义了一组严格的分支操作规则。主要包含以下分支：</p>
<ol>
<li><strong>Main/Master 分支</strong></li>
<li>存储官方发布历史</li>
<li>只包含稳定的、已发布的代码</li>
<li>
<p>每个提交都应该有一个版本标签（tag）</p>
</li>
<li>
<p><strong>Develop 分支</strong></p>
</li>
<li>主要的开发分支</li>
<li>包含最新的开发特性</li>
<li>所有特性分支都从这里分出</li>
<li>
<p>当开发完成时，合并回 main 分支</p>
</li>
<li>
<p><strong>Feature 分支</strong></p>
</li>
<li>用于开发新功能</li>
<li>从 develop 分支创建</li>
<li>命名规范：feature/功能名</li>
<li>
<p>完成后合并回 develop 分支</p>
</li>
<li>
<p><strong>Release 分支</strong></p>
</li>
<li>准备发布新版本时创建</li>
<li>从 develop 分支创建</li>
<li>命名规范：release/版本号</li>
<li>只修复 bug，不添加新功能</li>
<li>
<p>完成后同时合并到 main 和 develop</p>
</li>
<li>
<p><strong>Hotfix 分支</strong></p>
</li>
<li>用于修复生产环境的紧急问题</li>
<li>从 main 分支创建</li>
<li>命名规范：hotfix/问题描述</li>
<li>完成后同时合并到 main 和 develop</li>
</ol>
<p>工作流程：</p>
<ol>
<li>开发新功能：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>develop
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>feature/new-feature
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="c1"># 开发完成后</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>git<span class="w"> </span>checkout<span class="w"> </span>develop
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>git<span class="w"> </span>merge<span class="w"> </span>feature/new-feature
</code></pre></div>
<ol>
<li>准备发布：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>develop
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>release/1.0.0
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="c1"># 修复 bug 后</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>git<span class="w"> </span>merge<span class="w"> </span>release/1.0.0
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>git<span class="w"> </span>checkout<span class="w"> </span>develop
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>git<span class="w"> </span>merge<span class="w"> </span>release/1.0.0
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>git<span class="w"> </span>tag<span class="w"> </span>-a<span class="w"> </span>v1.0.0
</code></pre></div>
<ol>
<li>紧急修复：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>hotfix/critical-bug
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="c1"># 修复后</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>git<span class="w"> </span>merge<span class="w"> </span>hotfix/critical-bug
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>git<span class="w"> </span>checkout<span class="w"> </span>develop
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>git<span class="w"> </span>merge<span class="w"> </span>hotfix/critical-bug
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>git<span class="w"> </span>tag<span class="w"> </span>-a<span class="w"> </span>v1.0.1
</code></pre></div>
<p>注意事项：</p>
<ul>
<li>保持 main 分支稳定，只合并已测试的代码</li>
<li>develop 分支应该始终包含最新的开发代码</li>
<li>feature 分支应该定期与 develop 同步</li>
<li>release 和 hotfix 分支需要同时合并到 main 和 develop</li>
<li>每次发布都要打上版本标签</li>
</ul>
<h2 id="_3">实践的例子</h2>
<h3 id="1-workflow-simulation">1. workflow simulation</h3>
<ol>
<li>在 <code>main</code> 创建一个分支 <code>zhangwei/feature/test</code>：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>zhangwei/feature/test
</code></pre></div>
<ol>
<li>在 <code>zhangwei/feature/test</code> 上进行几个实验性的 commit：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># 修改文件并提交</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>mkdir<span class="w"> </span>experiment
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Experiment 1&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/experiment.txt
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/experiment.txt
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add experiment 1&quot;</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Experiment 2&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/experiment.txt
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/experiment.txt
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add experiment 2&quot;</span>
</code></pre></div>
<ol>
<li>在 <code>main</code> 创建一个正式分支 <code>zhangwei/feature/a</code>：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>zhangwei/feature/a
</code></pre></div>
<ol>
<li>把 <code>zhangwei/feature/test</code> 上的工作复制到 <code>zhangwei/feature/a</code> 上：</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>zhangwei/feature/a
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>git<span class="w"> </span>merge<span class="w"> </span>--squash<span class="w"> </span>zhangwei/feature/test
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Integrate experimental features&quot;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>git<span class="w"> </span>push
</code></pre></div>
   squash  可以把多个 commit 合并到一个 commit 中，这样可以减少提交次数，减少冲突，但是会丢失信息。在保持正式提交时的情况下，squash 是一个好的选择。</p>
<ol>
<li>进行 merge request：</li>
<li>提交 <code>zhangwei/feature/a</code> 到远程仓库并创建 merge request。</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>zhangwei/feature/a
</code></pre></div>
<ol>
<li>进行 merge review 并合并 merge request：</li>
<li>在代码评审通过后，合并 <code>zhangwei/feature/a</code> 到 <code>main</code>。</li>
</ol>
<p><img alt="alt text" src="../../../images/image.png" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>git<span class="w"> </span>pull<span class="w">  </span><span class="c1"># 再次确保 main 是最新的</span>
</code></pre></div>
<h3 id="2use-git-stash-to-work-cross-branches">2.use git stash to work cross branches</h3>
<ol>
<li>在 <code>zhangwei/feature/a</code> 分支上工作时，突然需要切换到 <code>xiaohong/feature/b</code> 修复bug：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>xiaohong/feature/a
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="c1"># 在 zhangwei/feature/a 上进行工作</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Feature A work in progress&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/feature_a.txt
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/feature_a.txt
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="c1"># 需要切换分支，但工作还未完成，使用 stash 保存</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>git<span class="w"> </span>stash<span class="w"> </span>save<span class="w"> </span><span class="s2">&quot;feature A work in progress&quot;</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="c1"># 切换到 xiaohong/feature/b 分支</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>git<span class="w"> </span>checkout<span class="w"> </span>xiaohong/feature/b
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="c1"># 在 xiaohong/feature/b 上修复 bug</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Bug fix in feature B&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/feature_b.txt
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/feature_b.txt
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Fix bug in feature B&quot;</span>
</code></pre></div>
<ol>
<li>现在需要立即提交 <code>xiaohong/feature/a</code> 上的工作， 并完成手头 feature/b 的工作</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1"># xiaohong/feature/b 上的新工作</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;New task in feature B&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/feature_b.txt
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/feature_b.txt
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="c1"># 保存 xiaohong/feature/b 的工作</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>git<span class="w"> </span>stash<span class="w"> </span>save<span class="w"> </span><span class="s2">&quot;feature B new task&quot;</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="c1"># 切回 xiaohong/feature/a 并恢复之前的工作</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>git<span class="w"> </span>checkout<span class="w"> </span>xiaohong/feature/a
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>git<span class="w"> </span>stash<span class="w"> </span>list<span class="w">  </span><span class="c1"># 查看所有 stash</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>git<span class="w"> </span>stash<span class="w"> </span>pop<span class="w"> </span>stash@<span class="o">{</span><span class="m">1</span><span class="o">}</span><span class="w">  </span><span class="c1"># 恢复最近的 stash（feature A 的工作）</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>git<span class="w"> </span>status
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>&gt;&gt;<span class="w"> </span>...
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>&gt;&gt;<span class="w">    </span>modified:<span class="w"> </span>experiment/feature_a.txt
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>&gt;&gt;<span class="w"> </span>...
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="c1"># 完成 xiaohong/feature/a 的工作并提交</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/feature_a.txt
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Complete feature A work&quot;</span>
</code></pre></div>
<ol>
<li>返回 <code>xiaohong/feature/b</code> 继续工作：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>xiaohong/feature/b
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>git<span class="w"> </span>stash<span class="w"> </span>list
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>&gt;&gt;&gt;stash@<span class="o">{</span><span class="m">0</span><span class="o">}</span><span class="s2">&quot; On xiaohong/feature/b: feature B new task&quot;</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>git<span class="w"> </span>stash<span class="w"> </span>pop<span class="w">   </span><span class="c1"># 恢复 feature B 的工作</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="c1"># changes 里面会出现 experiment/feature_b.txt</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="c1"># 完成 xiaohong/feature/b 的工作并提交</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/feature_b.txt
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Complete new task in feature B&quot;</span>
</code></pre></div>
<h3 id="3-merge">3. merge 工作流程</h3>
<p>张伟和小红在同一个项目上工作，他们需要分别开发不同的功能。
分别模拟zhangwei 和 xiaohong 的工作流程。他们分别创建不同的分支.</p>
<p>最开始的状态如下：<img alt="alt text" src="../../../images/img_v3_02j1_1d30823c-798d-44e9-9d0e-854a30558bfh.jpg" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1"># 小红：从最新的 main 分支创建功能分支</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>git<span class="w"> </span>pull<span class="w">  </span><span class="c1"># 确保 main 是最新的， 一般切换新分支之前，先pull以免落后，导致conflict</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>xiaohong/feature/register
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1"># 张伟：从最新的 main 分支创建功能分支</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>git<span class="w"> </span>pull<span class="w">  </span><span class="c1"># 确保 main 是最新的</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>zhangwei/feature/login
</code></pre></div>
<ol>
<li>张伟开始开发用户登录功能：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1"># 张伟：从最新的 main 分支创建功能分支</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>git<span class="w"> </span>pull<span class="w">  </span><span class="c1"># 确保 main 是最新的</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>zhangwei/feature/login
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="c1"># 张伟：开发登录功能</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;登录页面设计&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>experiment/login.txt
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/login.txt
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add login page design&quot;</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;登录验证&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/login.txt
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/login.txt
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add login validation&quot;</span>
</code></pre></div>
<p>目前状态应该是 zhangwei/feature/login 会提前main 两个提交</p>
<p><img alt="alt text" src="../../../images/img_v3_02j1_c562384b-a637-4247-a3ee-be794ed79e3h.jpg" /></p>
<p>张伟提交merge request 到 main 并合并。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1"># 张伟：提交并合并功能</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>zhangwei/feature/login
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="c1"># 创建 merge request</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="c1"># 正常是在github 页面提交merge request，进行review 再合并，请查阅第一个例子。下面是直接在命令行合并，模拟这个工作。</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>git<span class="w"> </span>pull<span class="w">  </span><span class="c1"># 再次确保 main 是最新的</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>git<span class="w"> </span>merge<span class="w"> </span>zhangwei/feature/login
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>main
</code></pre></div>
<p>merge 之后，main 保持和zhangwei/feature/login 同步
   <img alt="merge" src="../../../images/img_v3_02j1_9ca5eb4f-0c8d-4e0d-ab0f-a6052ef3789h.jpg" /></p>
<ol>
<li>同时，小红在开发注册功能：</li>
</ol>
<p>我们假设小红和张伟都在开发注册功能。
切换到小红的分支工作</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>xiaohong/feature/register
</code></pre></div>
<p>小红独立在自己的分支工作。</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># 小红：开发注册功能</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;注册页面设计&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>experiment/register.txt
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/register.txt
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add register page design&quot;</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;注册验证&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/register.txt
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/register.txt
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add register validation&quot;</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="c1"># 小红也需要在login.txt 上做一个修改，但是她还不知道张伟的修改</span>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;注册后登录验证&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/login.txt
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/login.txt
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add login validation after register&quot;</span>
</code></pre></div>
此时的分支状态为</p>
<p><img alt="branch status" src="../../../images/img_v3_02j1_19a42460-9dc7-464e-ac95-8df176bdd32h.jpg" /></p>
<ol>
<li>小红提交注册功能：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1"># 小红：获取最新的 main 分支并更新自己的功能分支</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>git<span class="w"> </span>pull
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>git<span class="w"> </span>checkout<span class="w"> </span>xiaohong/feature/register
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>git<span class="w"> </span>merge<span class="w"> </span>main<span class="w">  </span><span class="c1"># 将最新的 main 合并到自己的功能分支</span>
</code></pre></div>
<p>这时可能会出现merge conflict, 因为小红和张伟都在修改register.txt，所以会出现conflict。</p>
<p><img alt="alt text" src="../../../images/img_v3_02j1_7df340e3-da11-4222-9a0d-82362df2140h.jpg" />
   在source control 中，点击conflict 文件, 查看冲突的内容，在编辑器中解决掉conflict。</p>
<p><img alt="1" src="../../../images/img_v3_02j1_4bf19a2a-f8a4-4f32-b6cc-485d5f9f8d8h.jpg" /></p>
<p>解决完之后，提交合并的commit</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Merge branch &#39;main&#39; into &#39;xiaohong/feature/register&#39;&quot;</span>
</code></pre></div>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1"># 小红：提交并合并功能</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>xiaohong/feature/register
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="c1"># 创建 merge request</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>git<span class="w"> </span>pull
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>git<span class="w"> </span>merge<span class="w"> </span>xiaohong/feature/register
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>main
</code></pre></div>
提交完merge request之后，小红的分支和main 保持一致。并且包含了zhangwei 的register功能。</p>
<h3 id="4-git-cherry-pick">4. git cherry-pick</h3>
<p>git cherry-pick 用于从一个分支中挑选特定的提交（commit）并应用到当前分支，而不影响其他提交。它适用于以下场景：</p>
<p>跨分支迁移单个或多个提交（如将 feature 分支的某个提交应用到 main）。
修复 Bug（挑选修复 Bug 的 commit，合并到生产环境）。
避免合并整个分支（只想要特定的更改，而不是整个分支的所有提交）。</p>
<p>现在模拟一个例子，让我们看看如何使用 git cherry-pick。</p>
<blockquote>
<p>张伟在工作是开发登录功能，小红在开发注册功能。张伟发现小红的密码检查函数很实用，想要在登录功能中使用。</p>
</blockquote>
<p>准备工作：首先创建并设置两个分支的内容。</p>
<p><strong>小红的分支</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1"># 小红创建新分支</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>xiaohong/feature/4
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="c1"># 创建实验目录</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>experiment
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="c1"># 创建工具文件</span>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;1. 邮箱格式检查函数&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>experiment/utils.txt
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/utils.txt
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add email check function&quot;</span>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;2. 密码强度检查函数&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/utils.txt
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/utils.txt
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add password check function&quot;</span>
</code></pre></div>
<p><strong>张伟的分支</strong></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1"># 张伟创建新分支</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>zhangwei/feature/4
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="c1"># 确保实验目录存在</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>experiment
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="c1"># 创建登录功能文件</span>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;登录页面设计&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>experiment/login.txt
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/login.txt
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add login page design&quot;</span>
</code></pre></div>
准备好的小红和张伟的分支应该如下</p>
<p><img alt="alt text" src="../../../images/img_v3_02j1_441e403c-774e-494b-b333-d46859de635h.jpg" /></p>
<p>张伟发现小红的密码检查函数很实用，想要在登录功能中使用，但是还不想合并小红的所有提交。。</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1"># 查看小红分支的提交历史</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>git<span class="w"> </span>log<span class="w"> </span>xiaohong/feature/4
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>&gt;&gt;&gt;
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>&gt;&gt;&gt;<span class="w"> </span>commit<span class="w"> </span>d8f6173bec335204dfe18866a05d9fa9af66147d<span class="w"> </span><span class="o">(</span>xiaohong/feature/4<span class="o">)</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>&gt;&gt;&gt;<span class="w"> </span>Author:<span class="w"> </span>lilong<span class="w"> </span>&lt;TsienDragon@outlook.com&gt;
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>&gt;&gt;&gt;<span class="w"> </span>Date:<span class="w">   </span>Thu<span class="w"> </span>Jan<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">16</span>:47:38<span class="w"> </span><span class="m">2025</span><span class="w"> </span>+0800
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>&gt;&gt;&gt;
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>&gt;&gt;&gt;<span class="w">   </span>Add<span class="w"> </span>password<span class="w"> </span>check<span class="w"> </span><span class="k">function</span>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>&gt;&gt;&gt;
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>&gt;&gt;&gt;<span class="w"> </span>commit<span class="w"> </span>925abd9a8a1f842159d8defb0d721891ef50a221
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>&gt;&gt;&gt;<span class="w"> </span>Author:<span class="w"> </span>lilong<span class="w"> </span>&lt;TsienDragon@outlook.com&gt;
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a>&gt;&gt;&gt;<span class="w"> </span>Date:<span class="w">   </span>Thu<span class="w"> </span>Jan<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">16</span>:47:05<span class="w"> </span><span class="m">2025</span><span class="w"> </span>+0800
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>&gt;&gt;&gt;
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>&gt;&gt;&gt;<span class="w">   </span>Add<span class="w"> </span>email<span class="w"> </span>check<span class="w"> </span><span class="k">function</span>
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>&gt;&gt;&gt;
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a>&gt;&gt;&gt;<span class="w"> </span>commit<span class="w"> </span>f4a078a916e587d40f0368930318571d66e7f96d<span class="w"> </span><span class="o">(</span>origin/main,<span class="w"> </span>origin/HEAD,<span class="w"> </span>main<span class="o">)</span>
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>
<a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a><span class="c1"># 张伟要把小红实现的邮箱验证的功能pick 过来，找到邮箱验证函数的提交 hash</span>
<a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a>
<a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a>git<span class="w"> </span>checkout<span class="w"> </span>zhangwei/feature/4<span class="w"> </span><span class="c1"># 确保在张伟的分支</span>
<a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a>git<span class="w"> </span>cherry-pick<span class="w"> </span>925abd9a8a1f842159d8defb0d721891ef50a221<span class="w">  </span><span class="c1"># 925abd9a8a1f842159d8defb0d721891ef50a221 是密码检查函数的提交 hash</span>
<a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a><span class="c1"># 你可以使用 commit 的前几位（通常 7-10 位即可），只要它在当前仓库中是唯一的</span>
<a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a><span class="c1"># 或者用 git cherry-pick 925a</span>
</code></pre></div>
这样张伟的分支中就把小红的密码检查函数pick 过来了。</p>
<p><img alt="alt text" src="../../../images/img_v3_02j1_bf7314a3-cb3d-42cd-9fcd-bfb8cc10372h.jpg" /></p>
<p>如图所示 这两个commit 的内容一摸一样，但是他们的commit hash是不一样的。</p>
<h3 id="5-git-rebase">5. git rebase</h3>
<p>在 Git 版本控制中，git rebase 是一个强大的命令，主要用于整理提交历史，使其更加线性和清晰
准备工作：模拟一个需要进行 rebase 的场景。</p>
<p>本文介绍了 Git Rebase 的典型使用场景，并通过一个 张伟（开发支付功能）与小红（开发用户资料功能）并行开发 的案例，展示了如何使用 git rebase 来整理 Git 历史，使提交记录更清晰和线性。</p>
<p>张伟和小红先同时从当前的main 分支基础上，先独立开发</p>
<p><strong>张伟开发</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="c1"># 创建并切换到功能分支</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>git<span class="w"> </span>pull
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>zhangwei/feature/payment
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="c1"># 在功能分支上进行一些提交</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;添加支付按钮&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>experiment/payment.txt
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/payment.txt
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add payment button&quot;</span>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;添加支付处理函数&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/payment.txt
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/payment.txt
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add payment handler&quot;</span>
</code></pre></div>
<p><strong>小红开发</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="c1"># 小红在张伟开发期间，完成了用户资料更新功能</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>git<span class="w"> </span>pull
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>xiaohong/feature/profile
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="c1"># 添加用户资料更新功能</span>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;添加用户头像上传&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>experiment/profile.txt
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/profile.txt
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add avatar upload&quot;</span>
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;添加个人信息编辑&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/profile.txt
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/profile.txt
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add profile editor&quot;</span>
</code></pre></div>
<p><strong>小红先提交合并到 main</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>git<span class="w"> </span>merge<span class="w"> </span>xiaohong/feature/profile
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>git<span class="w"> </span>push
</code></pre></div>
<p>现在main同步了小红的用户资料更新功能，但是张伟的支付功能还没有同步，所以需要在zhangwei/feature/payment 分支上进行rebase。 如果直接使用merge 会让main 分支出现分叉。如果想保持分支结构为线性，则需要用到rebase。</p>
<p><img alt="alt text" src="../../../images/img_v3_02j1_99edf2e6-a435-4db7-803d-3e042e6a549h.jpg" /></p>
<p>张伟随后开始使用 rebase 合并到自己的分支</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1"># 首先更新 main 分支</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>git<span class="w"> </span>pull
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="c1"># 切回功能分支并执行 rebase</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>git<span class="w"> </span>checkout<span class="w"> </span>zhangwei/feature/payment
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>git<span class="w"> </span>rebase<span class="w"> </span>main
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="c1"># 保持了zhangwei 分支和main的线性结构， 再提交merge request</span>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="c1"># 如果有冲突，解决后继续</span>
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a>git<span class="w"> </span>add<span class="w"> </span>.
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a>git<span class="w"> </span>rebase<span class="w"> </span>--continue
<a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a><span class="c1"># 因为 rebase 改变了历史，需要强制推送</span>
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a>git<span class="w"> </span>push<span class="w"> </span>--force-with-lease<span class="w"> </span>origin<span class="w"> </span>zhangwei/feature/payment
</code></pre></div>
<p><img alt="alt text" src="../../../images/img_v3_02j1_9def9150-31f6-4bfd-94cb-fe0cc1a2318h.jpg" /></p>
<p>现在zhangwei/feature/payment 分支和main 分支都是线性的了，如上图</p>
<p>登陆github 页面，创建merge request，按下图所示依次执行。
<img alt="alt text" src="../../../images/image-1.png" /></p>
<p><img alt="alt text" src="../../../images/image-2.png" /></p>
<p><img alt="alt text" src="../../../images/image-3.png" />
注意需要在merge request 中选择rebase and merge选项
<img alt="alt text" src="../../../images/image-5.png" />
如果是merge 则main 就会出现分叉
<img alt="alt text" src="../../../images/image-4.png" /></p>
<p>本地同步跟新</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>git<span class="w"> </span>pull
</code></pre></div>
<img alt="alt text" src="../../../images/img_v3_02j1_3b97bc92-693e-4439-88b8-e832441434ch.jpg" /></p>
<p>现在main 分支也是线性了 同时同步了zhangwei 分支的更新.</p>
<p>注意事项：</p>
<ul>
<li>不要在公共分支上使用 rebase（比如 main 分支）</li>
<li>强制推送要谨慎使用，确保不会影响他人的工作</li>
<li>如果遇到复杂的冲突，可以使用 <code>git rebase --abort</code> 取消操作</li>
<li>建议在 rebase 之前创建一个备份分支：</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>git<span class="w"> </span>branch<span class="w"> </span>zhangwei/feature/payment-backup
</code></pre></div>
<h3 id="6-git-reset">6. git reset</h3>
<p>一个简单的例子</p>
<p>刚开始的状态
<img alt="alt text" src="../../../images/img_v3_02j1_9a07a55c-942e-46d8-8a85-b2b781e9d90h.jpg" /></p>
<p>想把main reset 到合并之前的状态</p>
<p>找到合并之前的commit hash</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>git reset --hard e806bd
</code></pre></div>
rest之后的状态
<img alt="alt text" src="../../../images/img_v3_02j1_0746705c-4ea7-4c78-ac5a-5f48dbb171eh.jpg" /></p>
<p>更进一步，<code>git reset</code> 有三种模式：</p>
<ul>
<li><code>--soft</code>：仅重置 HEAD 到指定提交，保留暂存区和工作目录的更改</li>
<li><code>--mixed</code>（默认）：重置 HEAD 和暂存区，保留工作目录的更改</li>
<li><code>--hard</code>：重置 HEAD、暂存区和工作目录，完全回到指定提交的状态</li>
</ul>
<p>准备工作：创建一个场景来演示不同类型的文件状态。</p>
<ol>
<li>初始设置：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="c1"># 创建新分支</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>zhangwei/feature/reset-demo
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="c1"># 创建实验目录</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>experiment
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="c1"># 第一个提交：添加项目配置</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;login&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>experiment/login.txt
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;项目配置文件&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>experiment/config.txt
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/config.txt
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/login.txt
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a>
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Initial commit: Add config file&quot;</span>
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a><span class="c1"># 第二个提交：添加用户模块</span>
<a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;用户登录功能&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>experiment/user.txt
<a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/user.txt
<a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add user login module&quot;</span>
<a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a>
<a id="__codelineno-35-21" name="__codelineno-35-21" href="#__codelineno-35-21"></a><span class="c1"># 第三个提交：添加订单模块</span>
<a id="__codelineno-35-22" name="__codelineno-35-22" href="#__codelineno-35-22"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;订单处理功能&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>experiment/order.txt
<a id="__codelineno-35-23" name="__codelineno-35-23" href="#__codelineno-35-23"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/order.txt
<a id="__codelineno-35-24" name="__codelineno-35-24" href="#__codelineno-35-24"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add order processing module&quot;</span>
<a id="__codelineno-35-25" name="__codelineno-35-25" href="#__codelineno-35-25"></a>
<a id="__codelineno-35-26" name="__codelineno-35-26" href="#__codelineno-35-26"></a><span class="c1"># 第四个提交：更新配置</span>
<a id="__codelineno-35-27" name="__codelineno-35-27" href="#__codelineno-35-27"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;更新配置参数&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/config.txt
<a id="__codelineno-35-28" name="__codelineno-35-28" href="#__codelineno-35-28"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/config.txt
<a id="__codelineno-35-29" name="__codelineno-35-29" href="#__codelineno-35-29"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Update config settings&quot;</span>
<a id="__codelineno-35-30" name="__codelineno-35-30" href="#__codelineno-35-30"></a>
<a id="__codelineno-35-31" name="__codelineno-35-31" href="#__codelineno-35-31"></a><span class="c1"># 查看提交历史</span>
<a id="__codelineno-35-32" name="__codelineno-35-32" href="#__codelineno-35-32"></a>git<span class="w"> </span>log<span class="w"> </span>--oneline
<a id="__codelineno-35-33" name="__codelineno-35-33" href="#__codelineno-35-33"></a><span class="c1"># 会显示类似：</span>
<a id="__codelineno-35-34" name="__codelineno-35-34" href="#__codelineno-35-34"></a><span class="c1"># abc1234 Update config settings</span>
<a id="__codelineno-35-35" name="__codelineno-35-35" href="#__codelineno-35-35"></a><span class="c1"># def5678 Add order processing module</span>
<a id="__codelineno-35-36" name="__codelineno-35-36" href="#__codelineno-35-36"></a><span class="c1"># ghi9012 Add user login module</span>
<a id="__codelineno-35-37" name="__codelineno-35-37" href="#__codelineno-35-37"></a><span class="c1"># jkl3456 Initial commit: Add config file</span>
</code></pre></div>
<p>现在准备演示不同的文件状态：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="c1"># 1. 已暂存的文件</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;已暂存的文件&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>experiment/staged.txt
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/staged.txt
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="c1"># 2. 已修改但未暂存的文件</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;新的订单功能&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/order.txt
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="c1"># 3. 未跟踪的文件</span>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;未跟踪的文件&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>experiment/untracked.txt
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>mv<span class="w"> </span>experiment/config.txt<span class="w"> </span>experiment/configs.txt
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>rm<span class="w"> </span>experiment/login.txt
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a>git<span class="w"> </span>mv<span class="w"> </span>experiment/register.txt<span class="w"> </span>experiment/register_func.txt
</code></pre></div>
<ol>
<li>查看当前状态：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>Changes to be committed:
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>(use &quot;git restore --staged &lt;file&gt;...&quot; to unstage)
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>     renamed:    experiment/register.txt -&gt; experiment/register_func.txt
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>     new file:   experiment/staged.txt
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a>Changes not staged for commit:
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a>(use &quot;git add/rm &lt;file&gt;...&quot; to update what will be committed)
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a>(use &quot;git restore &lt;file&gt;...&quot; to discard changes in working directory)
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a>      deleted:    experiment/config.txt
<a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a>      deleted:    experiment/login.txt
<a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a>      modified:   experiment/order.txt
<a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a>
<a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a>Untracked files:
<a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a>(use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)
<a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a>      experiment/configs.txt
<a id="__codelineno-37-16" name="__codelineno-37-16" href="#__codelineno-37-16"></a>      experiment/untracked.txt
</code></pre></div>
<p>在vscode 的source countrol 中也可以看到各个文件的状态</p>
<p><img alt="alt text" src="../../../images/img_v3_02j1_9e0756be-5c30-4ea0-b7bf-f3b325206b1h.jpg" /></p>
<ul>
<li>R 表示renamed</li>
<li>M 表示modified</li>
<li>D 表示deleted</li>
<li>U 表示untracked</li>
<li>A 表示added</li>
</ul>
<h4 id="1-git-reset-soft">1. 使用 <code>git reset --soft</code>：</h4>
<p>在 Git 命令 <code>git reset --soft HEAD~1</code> 中，<code>HEAD~1</code> 的含义如下：
- <strong><code>HEAD</code></strong> ：指的是当前分支的最新提交（即 <code>HEAD</code> 指针指向的提交）。</p>
<ul>
<li><strong><code>~1</code></strong> ：表示“向上回退 1 次提交”（即 <code>HEAD</code> 的上一个提交，也就是 <code>HEAD^</code>）。</li>
<li>
<p><code>HEAD~1</code> 等同于 <code>HEAD^</code>，表示回退 1 次提交。</p>
</li>
<li>
<p><code>HEAD~2</code> 表示回退 2 次提交，以此类推。</p>
</li>
</ul>
<p><strong>例子</strong></p>
<p>假设你的 Git 提交历史如下：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="nt">A</span><span class="w"> </span><span class="nt">--</span><span class="w"> </span><span class="nt">B</span><span class="w"> </span><span class="nt">--</span><span class="w"> </span><span class="nt">C</span><span class="w"> </span><span class="o">(</span><span class="nt">HEAD</span><span class="o">)</span>
</code></pre></div>
执行 <code>git reset --soft HEAD~1</code> 后，<code>HEAD</code> 会回退到 <code>B</code>，但不会修改暂存区（staging area）和工作区（working directory）：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="nt">A</span><span class="w"> </span><span class="nt">--</span><span class="w"> </span><span class="nt">B</span><span class="w"> </span><span class="o">(</span><span class="nt">HEAD</span><span class="o">)</span>
</code></pre></div>
但 <code>C</code> 的更改仍然存在于暂存区，意味着你可以重新提交它或进行其他操作。不同的 <code>git reset</code> 选项：
- <code>--soft</code>：只回退 <code>HEAD</code> 指针，提交的更改仍然在暂存区（<code>git status</code> 会显示文件仍处于 "Changes to be committed" 状态）。</p>
<ul>
<li>
<p><code>--mixed</code>（默认）：回退 <code>HEAD</code> 指针，并且撤销 <code>git add</code> 的操作，但不会影响工作目录。</p>
</li>
<li>
<p><code>--hard</code>：彻底回退提交，并且删除所有代码改动（慎用）。
你可以根据实际需求选择合适的 <code>git reset</code> 选项。</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="c1"># 软重置到上一个提交</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>git<span class="w"> </span>reset<span class="w"> </span>--soft<span class="w"> </span>HEAD~1
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>git<span class="w"> </span>status
</code></pre></div>
<p>现在的状态
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>Changes to be committed:
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>  (use &quot;git restore --staged &lt;file&gt;...&quot; to unstage)
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>        modified:   experiment/config.txt
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>        renamed:    experiment/register.txt -&gt; experiment/register_func.txt
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>        new file:   experiment/staged.txt
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>Changes not staged for commit:
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>  (use &quot;git add/rm &lt;file&gt;...&quot; to update what will be committed)
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>  (use &quot;git restore &lt;file&gt;...&quot; to discard changes in working directory)
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a>        deleted:    experiment/config.txt
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a>        deleted:    experiment/login.txt
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a>        modified:   experiment/order.txt
<a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a>
<a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a>Untracked files:
<a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a>  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)
<a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a>        experiment/configs.txt
<a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a>        experiment/untracked.txt
</code></pre></div>
Update config settings 的commit 没有了，但是其他的文件状态都没有变化</p>
<h4 id="git-reset-mixed">使用 <code>git reset --mixed</code>（默认模式）：</h4>
<p>先恢复各种文件的状态</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>git<span class="w"> </span>reset<span class="w"> </span>--hard<span class="w"> </span>HEAD@<span class="o">{</span><span class="m">1</span><span class="o">}</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>git<span class="w"> </span>mv<span class="w"> </span>experiment/register.txt<span class="w"> </span>experiment/register_func.txt
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;staged&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/staged.txt
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/staged.txt
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;change user&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/user.txt
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a>git<span class="w"> </span>add<span class="w">  </span>experiment/user.txt
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;change order&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/order.txt
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a>rm<span class="w"> </span>experiment/login.txt
</code></pre></div>
<p>各种文件的状态
<img alt="alt text" src="../../../images/img_v3_02j1_6bf38427-29bd-4f0e-bb8a-818e43751feh.jpg" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>git<span class="w"> </span>reset<span class="w"> </span>HEAD~2<span class="w">  </span><span class="c1"># 或 git reset --mixed HEAD~1</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>git<span class="w"> </span>status
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>&gt;&gt;&gt;<span class="w"> </span>Changes<span class="w"> </span>not<span class="w"> </span>staged<span class="w"> </span><span class="k">for</span><span class="w"> </span>commit:
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>&gt;&gt;&gt;<span class="w">  </span><span class="o">(</span>use<span class="w"> </span><span class="s2">&quot;git add/rm &lt;file&gt;...&quot;</span><span class="w"> </span>to<span class="w"> </span>update<span class="w"> </span>what<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>committed<span class="o">)</span>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>&gt;&gt;&gt;<span class="w">  </span><span class="o">(</span>use<span class="w"> </span><span class="s2">&quot;git restore &lt;file&gt;...&quot;</span><span class="w"> </span>to<span class="w"> </span>discard<span class="w"> </span>changes<span class="w"> </span><span class="k">in</span><span class="w"> </span>working<span class="w"> </span>directory<span class="o">)</span>
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>&gt;&gt;&gt;<span class="w">        </span>modified:<span class="w">   </span>experiment/config.txt
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a>&gt;&gt;&gt;<span class="w">        </span>deleted:<span class="w">    </span>experiment/login.txt
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>&gt;&gt;&gt;<span class="w">        </span>deleted:<span class="w">    </span>experiment/register.txt
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a>&gt;&gt;&gt;<span class="w">        </span>modified:<span class="w">   </span>experiment/user.txt
<a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a>
<a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a>&gt;&gt;&gt;<span class="w"> </span>Untracked<span class="w"> </span>files:
<a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a>&gt;&gt;&gt;<span class="w">   </span><span class="o">(</span>use<span class="w"> </span><span class="s2">&quot;git add &lt;file&gt;...&quot;</span><span class="w"> </span>to<span class="w"> </span>include<span class="w"> </span><span class="k">in</span><span class="w"> </span>what<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>committed<span class="o">)</span>
<a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a>&gt;&gt;&gt;<span class="w">        </span>experiment/configs.txt
<a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a>&gt;&gt;&gt;<span class="w">        </span>experiment/order.txt
<a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a>&gt;&gt;&gt;<span class="w">        </span>experiment/register_func.txt
<a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a>&gt;&gt;&gt;<span class="w">        </span>experiment/staged.txt
<a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a>&gt;&gt;&gt;<span class="w">        </span>experiment/untracked.txt
</code></pre></div>
<p>清除了staged 修改，但是其他的文件状态没有变化，staged 变成了 un-staged. user.txt 变成了un-staged, 因为user.txt 之前已经track过了。staged.txt 变成了untracked, 因为staged.txt 没有track过。register_func.txt 变成了untracked, 因为register_func.txt 没有track过, 因为register的commit 已经被撤回了，当前的commit 没有track 过register.txt 和register_func.txt，后者是从register.txt 重命名而来。</p>
<h4 id="git-reset-hard">使用 <code>git reset --hard</code></h4>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>git reset @{1} # 回复到前两个commit
</code></pre></div>
丢弃所有修改</p>
<p><img alt="alt text" src="../../../images/img_v3_02j1_41bdf8f6-0738-4101-851d-0754bfee84ch.jpg" /></p>
<p>现在所有修改的都没有了
<img alt="alt text" src="../../../images/img_v3_02j1_5170ce8e-e28f-442c-a88f-1f534051bddh.jpg" /></p>
<p>再模拟各种各种文件状态</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>git<span class="w"> </span>mv<span class="w"> </span>experiment/register.txt<span class="w"> </span>experiment/register_func.txt
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;staged&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/staged.txt
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>git<span class="w"> </span>add<span class="w"> </span>experiment/staged.txt
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;change user&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/user.txt
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>git<span class="w"> </span>add<span class="w">  </span>experiment/user.txt
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;change order&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/order.txt
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>rm<span class="w"> </span>experiment/login.txt
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;untracked&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/untracked.txt
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;config update 2&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>experiment/config.txt
</code></pre></div>
<p>目前的状态</p>
<p><img alt="alt text" src="../../../images/img_v3_02j1_0fb048cd-c120-45e2-8d3f-94943854ad2h.jpg" /></p>
<p>config.txt 内容
<img alt="alt text" src="../../../images/img_v3_02j1_7e794a1e-eeb0-4ff1-ac75-4c8adf51587h.jpg" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>git<span class="w"> </span>reset<span class="w"> </span>--hard<span class="w"> </span>HEAD~2<span class="w"> </span><span class="c1"># reset 连个commit</span>
</code></pre></div>
<p><img alt="alt text" src="../../../images/img_v3_02j1_dbbe18cb-dd04-47ad-ba51-4ab87bafb53h.jpg" /></p>
<p>reset 之后只剩下两个commit，同时source control 只剩下untracked.txt</p>
<p><strong>Git <code>reset</code> 命令对不同文件状态的影响</strong></p>
<table>
<thead>
<tr>
<th>文件状态</th>
<th>git reset --soft</th>
<th>git reset --mixed</th>
<th>git reset --hard</th>
</tr>
</thead>
<tbody>
<tr>
<td>HEAD（提交历史）</td>
<td>回退到指定提交</td>
<td>回退到指定提交</td>
<td>回退到指定提交</td>
</tr>
<tr>
<td>暂存区（Staging Area）</td>
<td>不变</td>
<td>清除（回到 HEAD 状态）</td>
<td>清除（回到 HEAD 状态）</td>
</tr>
<tr>
<td>工作区（Working Directory）</td>
<td>不变</td>
<td>不变</td>
<td>恢复为 HEAD 状态（丢弃已跟踪文件的修改）</td>
</tr>
<tr>
<td>已提交的文件（Tracked, Unmodified）</td>
<td>不变</td>
<td>不变</td>
<td>不变</td>
</tr>
<tr>
<td>已修改但未提交的文件（Tracked, Modified）</td>
<td>不变</td>
<td>不变</td>
<td>丢弃修改，恢复为 HEAD 版本</td>
</tr>
<tr>
<td>已暂存但未提交的文件（Tracked, Staged）</td>
<td>保持暂存</td>
<td>撤回暂存，但保留修改</td>
<td>丢弃修改，恢复为 HEAD 版本</td>
</tr>
<tr>
<td>未跟踪的文件（Untracked）</td>
<td>不变</td>
<td>不变</td>
<td>不变（不会删除）</td>
</tr>
<tr>
<td>忽略的文件（Ignored）</td>
<td>不变</td>
<td>不变</td>
<td>不变</td>
</tr>
</tbody>
</table>
<hr />
<p><strong>补充</strong>
- <code>--soft</code>：<strong>只回退提交历史</strong> ，暂存区和工作区<strong>保持不变</strong> 。适用于撤销最近的提交但保留代码状态（类似 <code>git commit --amend</code>）。</p>
<ul>
<li>
<p><code>--mixed</code>（默认）：<strong>回退提交历史并清除暂存区</strong> ，但<strong>不影响工作区</strong> 。适用于回退提交但保留代码修改，重新 <code>git add</code> 之后可以重新提交。</p>
</li>
<li>
<p><code>--hard</code>：<strong>回退提交历史、清除暂存区、重置工作区</strong> ，即<strong>完全恢复到指定提交的状态</strong> ，已修改但未提交的更改会<strong>被丢弃</strong> （<strong>慎用！</strong> ）.</p>
</li>
</ul>
<hr />
<p><strong>其他相关命令</strong> 如果 <code>git reset --hard</code> 之后发现误操作，可以尝试：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>git<span class="w"> </span>reflog
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>git<span class="w"> </span>reset<span class="w"> </span>--hard<span class="w"> </span>HEAD@<span class="o">{</span><span class="m">1</span><span class="o">}</span><span class="w">  </span><span class="c1"># 恢复到 reset 之前的状态</span>
</code></pre></div>
如果想<strong>删除未跟踪的文件</strong> ，需手动运行：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>git<span class="w"> </span>clean<span class="w"> </span>-fd<span class="w">  </span><span class="c1"># 删除未跟踪的文件和目录</span>
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>git<span class="w"> </span>clean<span class="w"> </span>-fx<span class="w">  </span><span class="c1"># 删除未跟踪的文件，包括 .gitignore 里忽略的文件</span>
</code></pre></div>
这张表可以帮助你选择适合的 <code>reset</code> 方式，以避免数据丢失。</p>
<p>注意事项：</p>
<ul>
<li><code>--hard</code> 是不可逆的，使用前要确保不需要保留任何更改</li>
<li>未跟踪的文件不受 <code>git reset</code> 影响</li>
<li>如果不确定，可以先创建分支备份：</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>git<span class="w"> </span>branch<span class="w"> </span>backup-before-reset
</code></pre></div>
<ul>
<li>可以使用 <code>git reflog</code> 查看操作历史，在意外重置后恢复：</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>git<span class="w"> </span>reflog<span class="w">  </span><span class="c1"># 查看操作历史</span>
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>git<span class="w"> </span>reset<span class="w"> </span>HEAD@<span class="o">{</span><span class="m">1</span><span class="o">}</span><span class="w">  </span><span class="c1"># 恢复到上一个操作， 可以简写为 git reset @{1}</span>
</code></pre></div>
<p>git reset HEAD@{1} 也可以使用 --soft、--mixed 和 --hard 选项，作用与 git reset <commit> 相同，只不过 HEAD@{1} 指的是 Git reflog 记录中的上一个 HEAD 位置</p>
<p>因此在实际开发中，尽量将工作及时commit 和push，避免出现丢失数据的情况。实在要立马操作，不方便commit 的时候，可以用stash 暂存，然后在合适的时候再进行操作</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/tsiendragon/learning" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "toc.integrate", "navigation.top", "search.highlight", "navigation.expand", "navigation.sections", "content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>